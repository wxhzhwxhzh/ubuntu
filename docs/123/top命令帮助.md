# `top` 命令帮助文档

## 一、命令概述
`top` 是一个在 Ubuntu 及其他类 Unix 系统中广泛使用的动态实时监控工具，用于显示系统中各个进程的资源占用情况，包括 CPU、内存等，同时还能展示系统的整体运行状态信息，帮助用户实时了解系统的性能和进程活动。

## 二、命令语法
```plaintext
top [选项]
```

### 常见选项及说明
| 选项 | 说明 |
| ---- | ---- |
| `-d 秒数` | 指定 `top` 命令的刷新间隔时间，单位为秒。例如，`top -d 5` 表示每 5 秒刷新一次显示内容。 |
| `-p 进程号` | 只监控指定进程号的进程信息。可以指定多个进程号，用逗号分隔，如 `top -p 1234,5678`。 |
| `-U 用户名` | 只显示指定用户所拥有的进程信息。例如，`top -U root` 只显示 `root` 用户的进程。 |
| `-i` | 不显示闲置或僵死的进程。 |
| `-c` | 显示进程的完整命令行信息，而不仅仅是命令名。 |
| `-S` | 累积模式，显示每个进程的累积 CPU 时间。 |

## 三、界面说明

### 1. 系统信息区域
在 `top` 命令启动后，界面顶部会显示系统的一些整体信息，通常包含以下几行：
- **第一行**：显示当前时间、系统运行时间、登录用户数以及系统负载信息。系统负载分别表示最近 1 分钟、5 分钟和 15 分钟内系统的平均负载情况。
- **第二行**：展示进程相关信息，包括总进程数、正在运行的进程数、睡眠的进程数、停止的进程数和僵死的进程数。
- **第三行**：显示 CPU 相关信息，如用户空间占用 CPU 百分比、内核空间占用 CPU 百分比、空闲 CPU 百分比等。
- **第四行**：显示物理内存使用情况，包括总内存、已使用内存、空闲内存和缓存内存等。
- **第五行**：显示交换空间（Swap）的使用情况，包括总交换空间、已使用交换空间和空闲交换空间。

### 2. 进程信息区域
在系统信息区域下方，是进程信息列表，每一行代表一个进程，各列含义如下：
- **PID**：进程的唯一标识符，即进程 ID。
- **USER**：该进程所属的用户。
- **PR**：进程的优先级，数值越小优先级越高。
- **NI**：进程的 nice 值，用于调整进程的优先级，范围为 -20 到 19，值越小优先级越高。
- **VIRT**：进程使用的虚拟内存总量。
- **RES**：进程使用的物理内存量。
- **SHR**：进程共享的内存量。
- **S**：进程的状态，常见状态有 `R`（运行）、`S`（睡眠）、`D`（不可中断睡眠）、`Z`（僵死）等。
- **%CPU**：进程占用 CPU 的百分比。
- **%MEM**：进程占用物理内存的百分比。
- **TIME+**：进程累计使用 CPU 的时间。
- **COMMAND**：进程对应的命令名或完整命令行（使用 `-c` 选项时显示完整命令行）。

## 四、交互命令
在 `top` 命令运行过程中，可以使用一些交互命令来进行操作，常见的交互命令如下：
| 命令 | 说明 |
| ---- | ---- |
| `q` | 退出 `top` 命令。 |
| `h` 或 `?` | 显示帮助信息。 |
| `k` | 向指定进程发送信号，通常用于终止进程。输入命令后，需要输入要发送信号的进程 ID 和要发送的信号编号（默认为 15，即 `SIGTERM`）。 |
| `r` | 调整指定进程的 nice 值，从而改变进程的优先级。输入命令后，需要输入要调整的进程 ID 和新的 nice 值。 |
| `M` | 按照内存使用百分比对进程进行排序。 |
| `P` | 按照 CPU 使用百分比对进程进行排序。 |
| `T` | 按照进程累计使用 CPU 的时间对进程进行排序。 |
| `1` | 显示每个 CPU 核心的使用情况（如果系统有多个 CPU 核心）。 |

## 五、使用示例

### 1. 以默认设置启动 `top` 命令
```bash
top
```
此命令将以默认的刷新间隔（通常为 3 秒）启动 `top` 命令，显示系统的整体信息和所有进程的资源占用情况。

### 2. 设置刷新间隔为 10 秒
```bash
top -d 10
```
该命令会使 `top` 命令每 10 秒刷新一次显示内容，方便用户以较慢的频率查看系统状态。

### 3. 只监控指定进程号的进程
```bash
top -p 1234
```
此命令只显示进程 ID 为 1234 的进程信息，便于用户专注于特定进程的资源使用情况。

### 4. 显示指定用户的进程
```bash
top -U ubuntu
```
该命令将只显示用户 `ubuntu` 所拥有的进程信息。

## 六、注意事项
- `top` 命令显示的是实时信息，数据会随着系统运行状态的变化而不断更新。
- 在使用交互命令时，要注意操作的准确性，特别是在使用 `k` 命令终止进程时，确保输入的进程 ID 正确，以免误杀重要进程。
- 对于系统性能的评估，不能仅仅依赖 `top` 命令，还需要结合其他工具和指标进行综合分析。 