`ip` 命令入门教程
===========

`ip` 命令是 Linux 系统中用于网络配置和管理的命令。它比旧的 `ifconfig` 命令更加灵活且功能更强大。通过 `ip` 命令，用户可以配置网络接口、查看网络状态、设置路由等。

### 1\. 查看网络接口

- **查看所有网络接口**
  ```sh
  ip addr
  ```
  
  或者
  ```sh
  ip a
  ```
  
  这个命令会列出系统中所有的网络接口（如 eth0、wlan0 等），并显示每个接口的详细信息，包括 IP 地址、MAC 地址、网络掩码等。
- **查看某个网络接口的详细信息**
  ```sh
  ip addr show eth0
  ```
  
  该命令将仅显示 `eth0` 接口的详细信息。

### 2\. 配置 IP 地址

- **为接口配置静态 IP 地址**
  ```sh
  sudo ip addr add 192.168.1.100/24 dev eth0
  ```
  
  这个命令将为 `eth0` 接口分配 IP 地址 `192.168.1.100`，并使用 `/24` 子网掩码。
- **删除某个 IP 地址**
  ```sh
  sudo ip addr del 192.168.1.100/24 dev eth0
  ```
  
  这个命令将从 `eth0` 接口删除 IP 地址 `192.168.1.100`。

### 3\. 启用或禁用网络接口

- **启用接口**
  ```sh
  sudo ip link set eth0 up
  ```
  
  该命令启用 `eth0` 接口，使其开始工作。
- **禁用接口**
  ```sh
  sudo ip link set eth0 down
  ```
  
  该命令禁用 `eth0` 接口。

### 4\. 查看路由表

- **查看路由表**
  ```sh
  ip route
  ```
  
  或者
  ```sh
  ip r
  ```
  
  这个命令会列出当前系统的路由信息，包括默认路由、目标网络等。
- **查看默认路由**
  ```sh
  ip route show default
  ```
  
  该命令只显示默认路由的相关信息。

### 5\. 添加和删除路由

- **添加静态路由**
  ```sh
  sudo ip route add 192.168.2.0/24 via 192.168.1.1 dev eth0
  ```
  
  这个命令会添加一条路由，将 `192.168.2.0/24` 网络通过网关 `192.168.1.1` 和接口 `eth0` 进行路由。
- **删除路由**
  ```sh
  sudo ip route del 192.168.2.0/24
  ```
  
  该命令会删除到 `192.168.2.0/24` 网络的路由。

### 6\. 配置网络别名

- **添加接口别名**
  ```sh
  sudo ip addr add 192.168.1.101/24 dev eth0 label eth0:1
  ```
  
  这个命令为 `eth0` 接口添加一个别名 `eth0:1`，并为其分配 IP 地址 `192.168.1.101`。
- **删除接口别名**
  ```sh
  sudo ip addr del 192.168.1.101/24 dev eth0 label eth0:1
  ```
  
  该命令将删除 `eth0:1` 别名的 IP 地址。

### 7\. 查看和管理 ARP 表

- **查看 ARP 表**
  ```sh
  ip neighbour
  ```
  
  这个命令显示 ARP（地址解析协议）表，列出已解析的 IP 地址和 MAC 地址的映射。
- **删除 ARP 缓存**
  ```sh
  sudo ip neighbour flush dev eth0
  ```
  
  该命令会清除 `eth0` 接口上的 ARP 缓存。

### 8\. 测试网络连接

- **查看接口的状态**
  ```sh
  ip link show eth0
  ```
  
  该命令会显示 `eth0` 接口的状态（如是否已启用、是否有数据包传输等）。
- **测试与某个主机的连通性**
  ```sh
  ip route get 8.8.8.8
  ```
  
  该命令显示从当前机器到 `8.8.8.8`（Google DNS）的路由路径。

### 小结

`ip` 命令非常强大，可以用来管理和配置网络接口、路由、ARP 表等。掌握 `ip` 命令后，你将能够更加灵活地管理 Linux 系统的网络配置。

- - - 
